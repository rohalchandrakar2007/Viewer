{"version":3,"sources":["config.js","envConfig.js","Utils.js","AjaxUtil.js","ViewUtil.js","ModelService.js","SceneModel.js","SceneView.js","SceneController.js","Event.js","init.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var Config = (function () {\n    var Config = {\n        urlAppName: '/pixum-model-viewer',\n        errorMsgClass: 'error-msg'\n    };\n    return Config;\n})();","var EnvConfig = (function () {\n    var env;\n\n    switch(window.location.hostname) {\n        case 'oobi.proptiger-ws.com':\n            env = 'beta';\n            break;\n        case 'oobi.proptiger.com':\n            env = 'prod';\n            break;\n        default :\n            env = 'dev';\n            break;\n\n    }\n\n    var EnvConfig = {\n        dev: {\n            env: env,\n            protocol: 'http://',\n            apiURL: '',\n            showLogs: true\n        },\n        beta: {\n            env: env,\n            protocol: window.location.protocol + '//',\n            apiURL: '',\n            showLogs: true\n        },\n        prod: {\n            env: env,\n            protocol: window.location.protocol + '//',\n            apiURL: '',\n            showLogs: false\n        }\n    };\n\n    return EnvConfig[env];\n\n})();\n","\"use strict\";\n\nvar Util = (function(){\n    return {\n        // \n    };\n})();","\"use strict\";\n\nvar AjaxUtil = (function(){\n    return {\n        getData: function (url) {\n            var self = this;\n            var ajaxObj = {\n                type: \"GET\",\n                url: url,\n                async: true,\n                dataType: \"json\",\n                success: function (data) {\n                    // register success callback in return promise\n                },\n                error: function (jqXHR, textStatus, errorThrown) {\n                    utils.log('read error callback for: ' + url);\n                    utils.log('error occured ' + errorThrown);\n                    self.handleAjaxErrorDefaultCallback(jqXHR, textStatus, errorThrown);\n                }\n            };\n\n            return $.ajax(ajaxObj);\n        },\n        getObjFileData: function (url,params) {\n            var self = this;\n            //var progressCallback = params.progressCallback || false;\n            \n            var onLoad = params.onLoad || function defaultOnloadCallback () {\n                \n            };\n            var onError = params.onError || function defaultErrorCallback () {\n                \n            };\n            var onProgress = params.onProgress || function (xhr) {\n                if ( xhr.lengthComputable ) {\n                    var percentComplete = xhr.loaded / xhr.total * 100;\n                    console.log( Math.round(percentComplete, 2) + '% downloaded' );\n                }\n            }\n            \n            var manager = new THREE.LoadingManager();\n            manager.onProgress = function ( item, loaded, total ) {\n                console.log( item, loaded, total );\n            };\n            \n            var loader = new THREE.OBJLoader( manager );\n            loader.load( url,\n                onLoad,\n                onProgress,\n                onError\n            );\n            \n            \n        },\n        makeRequest: function (url, type, data, async) {\n            var enableCORS = enableCORS || false;\n            var data  = (typeof data === 'undefined') ? {} : data;\n\n            var ajaxObj = {\n                type        : type,\n                url         : url,\n                async       : true,\n                dataType    : \"json\",\n                data        : JSON.stringify(data),\n                contentType : \"application/json\",\n                success     : function (data) {\n                    // register success callback in return promise\n                },\n                error       : function (jqXHR, textStatus, errorThrown) {\n                    utils.log('read error callback for: ' + url);\n                    utils.log('error occured ' + errorThrown);\n                    return false;\n                }\n            };\n\n            return $.ajax(ajaxObj);\n        },\n        getJsonData: function (url, callback) {\n            var self = this;\n            return $.ajax({\n                type: 'GET',\n                url: url,\n                async: true,\n                jsonpCallback: callback,\n                contentType: \"application/json\",\n                dataType: \"jsonp\",\n                success: function (data) {\n                    // register success callback in return promise\n                },\n                error: function (jqXHR, textStatus, errorThrown) {\n                    utils.log('read json error callback for: ' + url);\n                    utils.log('error occured ' + errorThrown);\n                    self.handleAjaxErrorDefaultCallback(jqXHR, textStatus, errorThrown);\n                }\n            });\n        }\n    };\n})();","\"use strict\";\n\nvar ViewUtil = (function(){\n    return {\n        showModal: function(msg) {\n            alert(msg);\n        },\n        showLoader: function() {\n            var template = [];\n\n            template.push(\n                '<div id=\"loader213DSDdsdASD3dds\" style=\"position:absolute;top:0;right:0;bottom:0;left:0;\">',\n                    'Loading...',\n                '</div>'\n            );\n            template = template.join('');\n\n            $(document.body).append(template);\n        },\n        hideLoader: function() {\n            $('#loader213DSDdsdASD3dds').remove();\n        }\n    };\n})();","\"use strict\";\n\nvar ModelService = (function(){\n    return {\n        getModel: function(id) {\n            var url = '';\n            return AjaxUtil.getData(url);\n        },\n        getObjModel: function(id,params) {\n            var url = '/src/assets/data/3dmodels/obj/male02.obj';\n            return AjaxUtil.getObjFileData(url, params);\n        }\n    };\n})();","\"use strict\";\n\nvar SceneModel = (function() {\n    function SceneModel() {\n        this.registerEvents();\n    }\n\n    SceneModel.prototype = {\n        registerEvents : function() {\n            this.modelLoaded = new Event(this);\n        },\n        loadModel: function() {\n            var self = this;\n            var modelId = 1;\n            //return ModelService.getModel(modelId);\n            \n            var params = {\n                'onLoad' : function(object) {\n                    console.log('onload');\n                    self.modelLoaded.notify({'object':object});\n                },\n                'onError' : function() {\n                    console.log('onerror');\n                },\n                'onProgress' :  function(xhr) {\n                    console.log('onprogress');\n                }\n            };\n            \n            return ModelService.getObjModel(modelId, params);\n        }\n    }\n\n    return SceneModel;\n})();","\"use strict\";\n\nvar SceneView = (function() {\n    function getElements() {\n        return {\n            'mainContainer' : '#app',\n            'btnHello' : '#btnHello'\n        };\n    }\n\n    function SceneView(model) {\n        this._model = model;\n\n        this._elements = getElements();\n\n        this.registerEvents();\n        this.attachEvents();\n        this.attachListeners();\n    }\n\n    SceneView.prototype = {\n        registerEvents : function() {\n            this.windowResized = new Event(this);\n            this.btnHelloClicked = new Event(this);\n        },\n        attachEvents : function() {\n            var self = this;\n\n            $(window).on('resize', function(e) {\n                // self.onWindowResize();\n                self.windowResized.notify();\n            });\n\n            $(self._elements.mainContainer).on('click', self._elements.btnHello, function() {\n                self.btnHelloClicked.notify();\n            });\n        },\n        attachListeners: function() {\n            var self = this;\n        },\n        buildSkeleton: function(data) {\n            var template = [];\n\n            template.push(\n                '<div>',\n                '<button id=\"btnHello\">Click</button>',\n                '</div>'\n            );\n            template = template.join('');\n\n            $(this._elements.mainContainer).html(template);\n        },\n        buildView: function() {\n            this.setupEnvironment();\n            this.showModel();\n        },\n        setupEnvironment: function() {\n\n        },\n        initModel: function () {\n            var self = this;\n            var params = {\n                'onLoad' : function(object) {\n                    console.log('onload');\n                    self.showModel(model);\n                },\n                'onError' : function() {\n                    console.log('onerror');\n                },\n                'onProgress' :  function(xhr) {\n                    console.log('onprogress');\n                }\n            };\n            \n            return ModelService.getObjModel(1, params);\n        },\n        showModel: function (model) {\n\n        },\n        onWindowResize: function() {\n\n        },\n        hello: function(msg) {\n            ViewUtil.showModal(msg);\n        }\n    }\n\n    return SceneView;\n})();","\"use strict\";\n\nvar SceneController = (function() {\n    function SceneController(view, model) {\n        this._view = view;\n        this._model = model;\n\n        this.attachListeners();\n    }\n\n    SceneController.prototype = {\n        attachListeners : function() {\n            var self = this;\n\n            self._view.btnHelloClicked.attach(function(sender, args) {\n                self._view.hello('Hello Rohal');\n            });\n        },\n        generateTemplate: function() {\n            var self = this;\n            self._view.buildSkeleton();\n            self._view.initModel();\n            // ViewUtil.showLoader();\n            \n            // this._model.loadModel();\n            \n            // this._model.loadModel().then(\n            //     function(response) { // Success\n            //         var data = response.data;\n            //         self._view.buildSkeleton(data);\n            //         ViewUtil.hideLoader();\n            //     },\n            //     function(response) { // Fail\n            //     }\n            // );\n\n        }\n    }\n\n    return SceneController;\n})();","\"use strict\";\n\nvar Event = (function(){\n    function Event(sender) {\n        this._sender = sender;\n        this._listeners = [];\n    }\n\n    Event.prototype = {\n        attach: function(listener) {\n            this._listeners.push(listener);\n        },\n        notify: function(args) {\n            var index;\n\n            for (index = 0; index < this._listeners.length; index++) {\n                this._listeners[index](this._sender, args);\n            }\n        }\n    };\n\n    return Event;\n})();","\"use strict\";\n\nvar sceneModel, sceneController, sceneView;\n\nif(!sceneModel) {\n    sceneModel = new SceneModel();\n    sceneView = new SceneView(sceneModel);\n    sceneController = new SceneController(sceneView, sceneModel);\n}\n\nsceneController.generateTemplate();"]}